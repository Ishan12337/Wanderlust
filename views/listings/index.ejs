<% layout("/layouts/boilerplate") %>  


<style>
#filters {
  display: flex;                
  flex-wrap: nowrap;           
  gap: 1rem;                   
  padding: 1rem;
  margin: 0 1rem;
  border-bottom: 1px solid #ccc;
  overflow-x: auto;             
  justify-content: flex-start;  
}

.filter {
  display: flex;
  flex-direction: column;
  align-items: center;
  min-width: 80px;
  font-size: 0.85rem;
  cursor: pointer;
  transition: transform 0.2s;
}

.filter:hover {
  transform: scale(1.05);
  background-color: #eee;
  border-radius: 50%;
}

.filter i {
  font-size: 1.2rem;
}

.tax-toggle {
  margin-left: auto;
  display: flex;
  align-items: center;
  white-space: nowrap;
  margin-bottom: 20px !important;
  
}


.gst-info {
  display: none;
  color: gray;
  font-style: italic;
  font-size: 0.9rem;
}

.card:hover .gst-info {
  display: inline;
}

  #hover-img:hover{
    transform: scale(1.02);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    border-radius: 5px !important;
  }


@media (max-width: 768px) {
  .tax-toggle {
    flex-shrink: 0;
  }
}


</style>

<div id="filters" class="scrolling-wrapper mt-4">
  <div class="filter">
    <div><i class="fa-solid fa-fire"></i></div>
    <p>Trending</p>
  </div>

  <div class="filter">
    <div><i class="fa-solid fa-bed"></i></div>
    <p>Rooms</p>
  </div>

  <div class="filter">
    <div><i class="fa-solid fa-umbrella-beach"></i></div>
    <p>Beachfront</p>
  </div>

  <div class="filter">
    <div><i class="fa-solid fa-mountain-city"></i></div>
    <p>Iconic city</p>
  </div>

  <div class="filter">
    <div><i class="fa-solid fa-tent-arrows-down"></i></div>
    <p>Camping</p>
  </div>

  <div class="filter">
    <div><i class="fa-solid fa-caravan"></i></div>
    <p>Camper vans</p>
  </div>

  <div class="filter">
    <div><i class="fa-solid fa-mountain"></i></div>
    <p>Mountains</p>
  </div>

  <div class="filter">
    <div><i class="fa-solid fa-person-hiking"></i></div>
    <p>Hiking</p>
  </div>

  <div class="filter">
    <div><i class="fa-solid fa-chess-rook"></i></div>
    <p>Castles</p>
  </div>

  <div class="filter">
    <div><i class="fa-solid fa-utensils"></i></div>
    <p>Foodies</p>
  </div>

  <div class="filter">
    <div><i class="fa-solid fa-vest-patches"></i></div>
    <p>Vines</p>
  </div>

  <div class="filter">
    <div><i class="fa-solid fa-person-swimming"></i></div>
    <p>Amazing Pool</p>
  </div>

  <div class="filter">
    <div><i class="fa-solid fa-cow"></i></div>
    <p>Farms</p>
  </div>

  <div class="tax-toggle">
    <div class="form-check-reverse form-switch">
      <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
      <label class="form-check-label" for="switchCheckDefault">Include with GST</label>
    </div>
  </div>
</div>

<div class="container mt-4">
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-3 g-4">
    <% for (let listing of allListings) { %>
      <a href="/listings/<%= listing._id %>" class="listing-link" style="text-decoration: none;">
        <div class="card" style="border: none !important;">
          <img src="<%= listing.image.url || listing.image %>" class="card-img-top" id="hover-img" alt="listing_img" style="height: 20rem; object-fit: cover;">
          <div class="card-body">
            <p class="card-text">
              <b id="listing-title"><%= listing.title %></b><br>
              &#8377; <%= listing.price.toLocaleString("en-IN") %> / night  
              <span class="gst-info tax-info" style="display: none;"> + 18% GST</span>
            </p>
          </div>
        </div> 
      </a>
    <% } %>
  </div>
</div>

<script>
  let taxSwitch = document.getElementById("switchCheckDefault");
  taxSwitch.addEventListener("click", () => {
    let taxInfo = document.getElementsByClassName("tax-info");
    for (let info of taxInfo) {
      if (info.style.display !== "inline") {
        info.style.display = "inline";
      } else {
        info.style.display = "none";
      }
    }
  });
</script>
